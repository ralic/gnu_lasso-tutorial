Authentic fixes to work with the new Python bindings
http://lists.labs.libre-entreprise.org/pipermail/authentic-devel/2007-December/000348.html
Index: authentic/root.ptl
===================================================================
--- authentic/root.ptl	(révision 864)
+++ authentic/root.ptl	(copie de travail)
@@ -204,7 +204,7 @@
         '<ul class="FederationsWidget">'
         server = misc.get_lasso_server()
         lasso_identity = lasso.Identity.newFromDump(identity.lasso_dump)
-        for k in lasso_identity.providerIds:
+        for k in lasso_identity.federations.keys():
             klp = misc.get_provider_key(k)
             try:
                 provider, label = misc.get_provider_and_label(klp)
Index: authentic/misc.py
===================================================================
--- authentic/misc.py	(révision 864)
+++ authentic/misc.py	(copie de travail)
@@ -154,9 +154,9 @@
         publickey_fn = get_abs_path(lp['publickey'])
     # cacertchain (not really necessary to get provider label
 
-    provider = lasso.Provider(lp['role'], get_abs_path(lp['metadata']), publickey_fn, None)
-
-    if provider.this is None:
+    try:
+        provider = lasso.Provider(lp['role'], get_abs_path(lp['metadata']), publickey_fn, None)
+    except lasso.Error:
         raise KeyError()
 
     if lp.get('label'):
